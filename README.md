<p align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://github.com/nicolodiamante/keyave/assets/48920263/2b92a58d-3598-4df5-b426-31c219dec8b9" draggable="false" ondragstart="return false;" alt="Keyave" title="Keyave" />
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/42ed56d3-126c-476b-82f7-7e1fbcf3b2a6" draggable="false" ondragstart="return false; "alt="Keyave" title="Keyave" />
  </picture>
</p>

iCloud Keychain is a handy feature for Apple users that provides a secure and convenient way to manage passwords and other sensitive information. With iCloud Keychain, you can securely store your login credentials, credit card information, Wi-Fi passwords, and other important data on your Apple devices.

At its core, iCloud Keychain champions data security. It ensures data security with end-to-end encryption, allowing only trusted devices linked to your iCloud account to access the information. Moreover, iCloud Keychain bolsters security with biometric authentication methods like Touch ID or Face ID.

Overall, iCloud Keychain is a potent tool that makes it easy to manage your passwords and other sensitive information securely across all your Apple devices. If you're not already using it, you should consider turning it on to take advantage of its many benefits.

<br><br><br>

<p align="center">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://github.com/nicolodiamante/keyave/assets/48920263/1413b988-05fb-4587-8ba7-363a68bebc28" draggable="false" ondragstart="return false;" alt="System settings Passwords" title="System settings Passwords" />
      <img src="https://github.com/nicolodiamante/keyave/assets/48920263/92ff64a6-0935-431a-8315-c757e8671b47" draggable="false" ondragstart="return false; "alt="System settings Passwords" title="System settings Passwords" width="600" />
    </picture>
  </a>
</p>

<br><br><br>

## The benefits of using iCloud Keychain

Apple has made significant strides in enhancing its password management capabilities with the introduction of new features in iOS 15, macOS Monterey, and beyond. In the past, iCloud Keychain was a somewhat passive password manager that would occasionally pop up unexpectedly to suggest strong passwords or autofill information, leaving users confused. However, with the latest updates, iCloud Keychain has become more proactive and now scans for potential password breaches, alerts users to repeated passwords, and even enables two-factor authentication (2FA).

<br><br>

<p align="center">
  <picture>
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/a8dcc6a0-bc90-4351-94dc-345d2dbac280" draggable="false" ondragstart="return false;" alt="iCloud Passwords & keychain" title="iCloud Passwords & keychain" width="560px" />
  </picture>
</p>

<br><br>

### Turn on iCloud Keychain on your iPhone, iPad or iPod touch

Tap Settings, tap [your name] and then choose iCloud <img src="https://github.com/nicolodiamante/keyave/assets/48920263/b8dd686e-4971-428d-86aa-f2dd0d0d9c94" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Tap Passwords and Keychain <img src="https://github.com/nicolodiamante/keyave/assets/48920263/b8dd686e-4971-428d-86aa-f2dd0d0d9c94" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Turn on iCloud Keychain.

### Turn on iCloud Keychain on your Mac

Choose Apple menu  <img src="https://github.com/nicolodiamante/keyave/assets/48920263/b8dd686e-4971-428d-86aa-f2dd0d0d9c94" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> System Settings (or System Preferences) <img src="https://github.com/nicolodiamante/keyave/assets/48920263/b8dd686e-4971-428d-86aa-f2dd0d0d9c94" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Click your name, then click iCloud <img src="https://github.com/nicolodiamante/keyave/assets/48920263/b8dd686e-4971-428d-86aa-f2dd0d0d9c94" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Turn on Password & Keychain.
<br><br>

## A Shortcut to access Passwords in a quick way

Using a password manager is essential in today's digital age. With so many accounts to keep track of, it's easy to fall into the trap of using the same password across multiple accounts or using weak passwords that are easy to guess. Apple has made it easy for users to manage their passwords by providing a built-in password manager that syncs across all Apple devices.

<br>

### Access passwords with a Shortcut

To access the password manager on your Apple device, simply go to Settings (on iOS) or System Preferences (on macOS), and locate the Passwords option. Nonetheless, the need to revisit this location each time you wish to manage your passwords can be quite time-consuming.

Access your passwords swiftly and conveniently with a straightforward shortcut can streamline your workflow. For iOS and iPadOS users, this means a single tap from your home screen, while macOS users can find it readily in the menu bar. To get started, ensure that you have the [Apple Shortcuts][apple-shortcuts-download] app installed. Next, download the [Passwords Shortcut][passwords-shortcut] or follow the provided instructions to download and run the script. This script not only retrieves the shortcut for you but also configures your terminal environment for Touch ID, significantly streamlining your authentication process.

<br><br>

<p align="center">
  <a href="https://www.icloud.com/shortcuts/afd3e6896604451ab31cd303a153c881" target="_blank">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://github.com/nicolodiamante/keyave/assets/48920263/0240cd9b-e92f-4fb6-b141-adaf5b623d2d" draggable="false" ondragstart="return false;" alt="Download the Shortcut" title="Download Passwords" />
      <img src="https://github.com/nicolodiamante/keyave/assets/48920263/0db142ee-ce14-4c84-b4cc-f932cc7e8641" draggable="false" ondragstart="return false; "alt="Download the Shortcut" title="Download Passwords" width="600" />
    </picture>
  </a>
</p>

<br><br>

### Manage passwords in the terminal

Macs have a fingerprint scanner (Touch ID) to simplify the login process. iCloud Keychain works best when you leverage Apple’s biometric system to make filling passwords quick and easy. Then you won’t need to type your Apple ID password or passcode whenever you need to fill in a field, but this is not activated by default in the terminal, which means that when you run programs with security privileges, you need to type the password.

<br><br>

<p align="center">
  <picture>
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/d72c8182-5f98-4354-9bd0-b27f59ea18e1" draggable="false" ondragstart="return false;" alt="Use Touch ID in Terminal" title="Use Touch ID in Terminal" width="500px" />
  </picture>
</p>

<br><br>

You can either manually set up Touch ID in your terminal by following the provided steps, or use the script for an automated process:

- [Manual Setup](#manual-configuration-of-touch-id)
- [Automated Script](#automated-configuration-of-touch-id)

<br>

> **Note:** Modifying PAM (Pluggable Authentication Module) configurations requires careful consideration due to its sensitive nature. It's imperative to fully comprehend each step and command involved in this process. Before making any changes, it is crucial to have up-to-date backups of your system to ensure safety and security. Proceed with caution and informed understanding.

<br>

## Manual Configuration of Touch ID

### Before macOS Sonoma (Pre-macOS 14)

1. **Open Terminal**: Start by launching the Terminal application on your Mac.

2. **Edit Configuration**: Open the `/etc/pam.d/sudo` file in a text editor. For example, using nano, enter:

   ```shell
   sudo nano /etc/pam.d/sudo
   ```

3. **Integrate Touch ID**: At the beginning of the file, insert this line:

   ```shell
   auth       sufficient     pam_tid.so
   ```

4. **Save Changes**: After adding the line, save your changes and exit the text editor.

Following these steps enables Touch ID authentication for the sudo command in Terminal, allowing fingerprint verification instead of a password prompt.

<br>

### macOS Sonoma (macOS 14) and Later

macOS Sonoma introduced `/etc/pam.d/sudo_local`, a new file to maintain Touch ID configurations for sudo across system updates. Here's the setup process:

1. **Verify sudo Presence**: macOS Sonoma includes a `sudo_local.template` file. Confirm its existence with:

   ```shell
   sudo cp sudo_local.template /etc/pam.d/sudo_local
   ```

2. **Create File**: If the `sudo_local.template` is present, duplicate it to create `sudo_local`:

   ```shell
   sudo cp /etc/pam.d/sudo_local.template /etc/pam.d/sudo_local
   ```

3. **Modify Configuration**: Edit the `sudo_local` file in a text editor. Change:

   ```shell
   #auth       sufficient     pam_tid.so
   ```

   to:

   ```shell
   auth       sufficient     pam_tid.so
   ```

4. **Save and Test**: After editing, save the changes, close the editor, and test the new configuration by using the sudo command in Terminal.

These steps enable Touch ID authentication for sudo commands on macOS Sonoma and later versions. For automated setup, consider using a script as outlined below.

<br><br>

## Automated Configuration of Touch ID

Keyave is a script designed to automate the setup of Touch ID authentication for terminal operations on Mac, replacing the need for password entry. Choose from two methods for installation:

**Automatic Download via `curl`**: Simply execute the following command in your terminal to quickly download and seamlessly install the utility:

```shell
sh -c "$(curl -fsSL https://raw.githubusercontent.com/nicolodiamante/keyave/HEAD/bootstrap.sh)"
```

**Manual Cloning**: For those who prefer a hands-on approach, you can manually clone the repository to your desired location (`~/keyave` in this case):

```shell
git clone https://github.com/nicolodiamante/keyave.git ~/keyave
```

<br>

### Post-Download Steps

**Directory Navigation & Script Execution**: Navigate to the repository's `utils` directory and execute the installation script:

```shell
source install.sh
```

The script first determines the macOS version on your Mac. For macOS Sonoma (version 14) and later, it modifies the `sudo_local` file to enable Touch ID authentication for sudo commands. This is achieved by copying a template file and adjusting its settings to incorporate Touch ID support. If the system is running an earlier version of macOS, the script instead modifies the `sudo` file directly to enable Touch ID, adding the necessary configuration at the top of the file. In both scenarios, a backup of the original file is created for safety. The script is tailored to enhance security on Mac models with Touch ID capability.

<br>

## Final Thoughts

Apple's iCloud Keychain is a user-friendly password management solution seamlessly integrated into the macOS ecosystem. It's ideal for casual users and families looking for simplicity. Besides password storage, it securely handles credit card data and syncs across Apple devices. With end-to-end encryption and biometric authentication, it's cost-effective and proactive against password breaches. Recent updates enable third-party app integration. iCloud Keychain combines ease of use, strong security, and broad functionality, making it a standout password manager choice.

<br><br>

<p align="center">
  <picture>
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/518443e1-1c2a-46dd-addb-d37d5685a1b7" draggable="false" ondragstart="return false;" alt="Siri launching Shortcut Passwords" title="Siri launching Shortcut Passwords" width="650px" />
  </picture>
</p>

<br><br>

## Notes

### Easy access to the Shortcut using Spotlight

To access the Shortcut using Spotlight, follow these steps:

Open the Shortcuts app on your Mac <a href="#"><img src="https://github.com/nicolodiamante/keyave/assets/48920263/b8dd686e-4971-428d-86aa-f2dd0d0d9c94" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /></a> Open Passwords <a href="#"><img src="https://user-images.githubusercontent.com/48920263/113451325-0df5f380-9402-11eb-80ea-cf4140340ab4.png" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /></a> Click on the File menu in the top-left corner of the screen <a href="#"><img src="https://user-images.githubusercontent.com/48920263/113451325-0df5f380-9402-11eb-80ea-cf4140340ab4.png" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /></a> Click on Add to Dock from the dropdown menu.

Once you add the Shortcut to your Dock, it becomes readily accessible. You can also use Spotlight to open it by simply typing the Shortcut's name. After adding it to Spotlight, you have the option to remove the Shortcut from the Dock if you prefer. This method offers a quick and convenient way to access your password manager, ensuring efficient management of your passwords.

<br>

<p align="center">
  <picture>
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/8e45a442-9bcd-4bd1-9586-683bf753577d" draggable="false" ondragstart="return false;" alt="Spotlight Search of password.app" title="Spotlight Search of password.app" width="700px" />
  </picture>
</p>

<br>

### How to set Touch ID in iTerm

In Apple's default terminal it works like a charm, but in iTerm2 it needs additional configuration.

Go to Prefs <img src="https://user-images.githubusercontent.com/48920263/113451325-0df5f380-9402-11eb-80ea-cf4140340ab4.png" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Advanced <img src="https://user-images.githubusercontent.com/48920263/113451325-0df5f380-9402-11eb-80ea-cf4140340ab4.png" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Allow sessions to survive logging out and back in <img src="https://user-images.githubusercontent.com/48920263/113451325-0df5f380-9402-11eb-80ea-cf4140340ab4.png" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Set the value to no <img src="https://user-images.githubusercontent.com/48920263/113451325-0df5f380-9402-11eb-80ea-cf4140340ab4.png" draggable="false" ondragstart="return false;" alt="Arrow" title="Arrow" width="5.4px" /> Restart iTerm.

<br>

### Access your iCloud passwords with Chrome on Windows

iCloud may be Apple’s thing, but you can still get your passwords even if you have an iPhone and a PC. You’ll need to [download iCloud for Windows][icloud-windows] first and ensure it’s updated to the latest version. Then you’ll need to grab the [iCloud Passwords extension in the Chrome store][chrome-windows] and sign in to turn on both. Once you enter your verification code, you can grab passwords from your iCloud Keychain when visiting a site in Chrome on your PC, just as if you were using Safari on your Mac.

<br><br>

<p align="center">
  <picture>
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/7252d6a9-7ec4-4b65-b7f3-614f0706d781" draggable="false" ondragstart="return false;" alt="iCloud Keychain in Chrome" title="iCloud Keychain in Chrome" width="650px" />
  </picture>
</p>

<br><br>

### Resources

- [Set up iCloud Keychain][setup-keychain]
- [iCloud data security overview][security-overview]
- [Two-factor authentication for Apple ID][two-factor]
- [How to find saved passwords and passkeys on your Mac][passkeys-mac]
- [How to find saved passwords and passkeys on your iPhone][passkeys-iphone]
- [Use Touch ID on Mac][touchid-mac]
- [Shortcuts User Guide][apple-shortcuts-guide]

### Contribution

Any suggestions or feedback you may have for improvement are welcome. If you encounter any issues or bugs, please report them to the [issues page][issues].
<br><br>

<p align="center">
  <picture>
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/f0730e41-239c-452d-a7b2-f678361f872d" draggable="false" ondragstart="return false;" /></>
  </picture>
</p>

<p align="center">
  <a href="https://nicolodiamante.com" target="_blank">
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/2d0620de-3df3-4253-904d-c0d1a1116413" draggable="false" ondragstart="return false;" alt="Nicol&#242; Diamante Portfolio" title="Nicol&#242; Diamante" width="17px" />
  </a>
</p>

<p align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://github.com/nicolodiamante/keyave/assets/48920263/0164c4aa-6931-4b98-8c0d-3068f01de027" draggable="false" ondragstart="return false;" alt="MIT License" title="MIT License" />
    <img src="https://github.com/nicolodiamante/keyave/assets/48920263/28ee8715-bdb7-4f23-960e-7878000eac50" draggable="false" ondragstart="return false; "alt="MIT License" title="MIT License" width="95px" />
  </picture>
</p>

<!-- Link labels: -->

[icloud-windows]: https://support.apple.com/en-us/HT204283
[chrome-windows]: https://apps.microsoft.com/store/detail/icloud/9PKTQ5699M62?hl=en-us&gl=us&rtc=1&activetab=pivot%3Aoverviewtab
[apple-shortcuts-download]: https://apps.apple.com/us/app/shortcuts/id915249334
[passwords-shortcut]: https://www.icloud.com/shortcuts/afd3e6896604451ab31cd303a153c881
[setup-keychain]: https://support.apple.com/en-au/HT204085
[security-overview]: https://support.apple.com/en-au/HT202303
[two-factor]: https://support.apple.com/en-us/HT204915
[passkeys-mac]: https://support.apple.com/en-au/HT211145
[passkeys-iphone]: https://support.apple.com/en-au/HT211146
[touchid-mac]: https://support.apple.com/en-mt/guide/mac-help/mchl16fbf90a/mac
[apple-shortcuts-guide]: https://support.apple.com/en-gb/guide/shortcuts/welcome/ios
[issues]: https://github.com/nicolodiamante/keyave/issues
